<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Admin Dashboard - Event Planner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <metahttp-equiv="Expires" content="0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
    <div class="container">
        {% include 'admin/partials/header.html' %}
        {% include 'admin/partials/navigation.html' %}
        <div class="content">
            {% include 'admin/sections/overview.html' %}
            {% include 'admin/sections/cities.html' %}
            {% include 'admin/sections/venues.html' %}
            {% include 'admin/sections/events.html' %}
            {% include 'admin/sections/sources.html' %}
        </div>
    </div>

    <!-- Modals -->
    {% include 'admin/modals/add_city.html' %}
    {% include 'admin/modals/add_venue.html' %}
    {% include 'admin/modals/edit_city.html' %}
    {% include 'admin/modals/edit_venue.html' %}
    {% include 'admin/modals/edit_event.html' %}
    {% include 'admin/modals/add_source.html' %}
    {% include 'admin/modals/edit_source.html' %}
    {% include 'admin/modals/event_details.html' %}
    {% include 'admin/modals/venue_details.html' %}
    {% include 'admin/modals/city_details.html' %}
    {% include 'admin/modals/source_details.html' %}
    {% include 'admin/modals/image_upload.html' %}
    {% include 'admin/modals/url_scraper.html' %}
    {% include 'admin/modals/create_from_venue.html' %}

    <!-- Global error handlers to suppress browser extension errors -->
    <script>
        // Suppress errors from browser extensions that interfere with the console
        window.addEventListener('error', function(event) {
            // Suppress errors from browser extensions
            if (event.message && (
                event.message.includes('message channel') ||
                event.message.includes('message port closed') ||
                event.message.includes('runtime/sendMessage')
            )) {
                event.preventDefault();
                return false;
            }
        }, true);
        
        window.addEventListener('unhandledrejection', function(event) {
            // Suppress promise rejections from browser extensions
            if (event.reason) {
                const reasonStr = typeof event.reason === 'string' 
                    ? event.reason 
                    : (event.reason?.message || String(event.reason));
                
                if (reasonStr && (
                    reasonStr.includes('message channel') ||
                    reasonStr.includes('message port closed') ||
                    reasonStr.includes('runtime/sendMessage')
                )) {
                    event.preventDefault();
                    return;
                }
            }
        });
    </script>

    <!-- Unified Calendar Export Module -->
    <script src="/static/js/calendar-export.js"></script>
    <!-- Admin JavaScript Modules -->
    <script src="{{ url_for('static', filename='js/admin/core.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin/tables.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin/cities.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin/venues.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin/events.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin/sources.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin/modals.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin/init.js') }}"></script>
</body>
</html>
